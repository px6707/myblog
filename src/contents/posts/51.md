---
title: 单片机草稿
published: 2025-08-15
description: 单片机草稿
tags: [单片机]
category: 单片机
licenseName: "Unlicensed"
author: panxiao
sourceLink: "https://github.com/px6707/myblog"
draft: true
---
STC89C52RC

STC 代表STC公司生产
8 代表8051内核 STC9xxx 是51系列增强版本
9 代表内部含有FlashE²PROM 寄存器。80C51 的0表示内部含有Mask Rom 掩模ROM存储器  87C51 的7表示内部含有EPROM寄存器 （紫外线可擦除ROM）
C 表示为CMOS产品。还有如89LV52和89LE58 中的LV、LE都表示该芯片为低电压产品（通常3.3V供电）；89S52中的S表示该芯片含有可串行下载功能的Flash存储器，即具有ISP可在线编程功能。
5 固定不变
2 表示芯片内部程序存储空间大小。1位4KB，2位8KB
RC STC单片机内部RAM为512B。RD+表示RAM为1280B
40 表示芯片外部晶振最高可进入40MHz。对AT单片机树脂一般为24.，表示最高晶振频率为24MHz
I 产品级别，表示芯片使用的温度范围。I表示工业级，-40℃  - +85℃  C 表示商业级，0℃  - +70℃   A 表示汽车级，-40℃  - +125℃   M表示军用级 -55℃  - +150℃
PDIP 表示封装型号。PDIP表示双列直插式 


引脚作用
分类：
1. 电源和时钟
- 40 VCC 电源正极
- 20 GND 电源地
- 19 XTAL1 外部晶振输入
- 18 XTAL2 外部晶振输出
- 9 RST 复位引脚 持续2个机器周期的高电平有效
2. IO口
- 32 - 39 P0口 8位双向三态IO口。P0内部没有上拉电阻，不能输出高电平，需要外接上拉电阻（一般10K欧）
- 1-8 P1口 8位准双向IO口，自带上拉电阻
- 21-28 P2口 8位准双向IO口，自带上拉电阻
- 10-17 P3口 8位准双向IO口，自带上拉电阻，第一功能为普通IO口，第二功能如下
    - 10 P3.0 RXD 串行通信接收端
    - 11 P3.1 TXD 串行通信发送端
    - 12 P3.2 INT0 外部中断0
    - 13 P3.3 INT1 外部中断1
    - 14 P3.4 T0 定时器0外部输入
    - 15 P3.5 T1 定时器1外部输入
    - 16 P3.6 WR 外部数据存储器写选通
    - 17 P3.7 RD 外部数据存储器读选通
3. 控制引脚
- 29 PSEN 程序存储器读取使能，用于从外部程序存储器读取指令
- 30 ALE/PROG 地址锁存使能，用于锁存地址的低8位
- 31 EA/VPP 外部程序存储器访问使能，接VCC时使用内部ROM，接GND时使用外部ROM

### 电平特性
TTL 晶体管逻辑Transistor-Transistor Logic 使用双极晶体管作为开关元件
CMOS 互补金属氧化物半导体 Complementary Metal-Oxide-Semiconductor 使用互补的PMOS和NMOS晶体管对

功耗：CMOS远低于TTL
集成度：CMOS高于TTL
速度：现代CMOS通常快于TTL
成本：CMOS制造成本更低

TTL电路和CMOS 电路逻辑如下：
1 VOH：逻辑电平1的输出电压
2 VOL：逻辑电平0的输出电压
3 VIH：逻辑电平1的输入电压
4 VIL：逻辑电平0的输入电压

TTL电平临界值：VOHmin=2.4V VOLmax=0.4V VIHmin=2.0V V ILmax=0.8V
CMOS电平临界值(假设电源+5V)：VOHmin=4.99V VOLmax=0.01V VIHmin=3.5V VILmax=1.5V


### C51 扩充数据类型
| 类型 | 长度 | 值域 | 说明 |
| ---- | ---- | ---- | ---- |
| bit | 位 | 0或1 | 位变量声明 |
| sbit | 位 | 0或1 | 特殊功能位声明 |
| sfr | 8位=1字节 | 0-255 | 8位特殊功能寄存器声明 |
| Sfr16 | 16位=2字节 | 0-65535 | Srf16位数据声明 |
| * | 1-3字节 | 0-65535 | 对象的地址 |


typedef C51固有的数据类型说明符，可以对类型取别名
```c
typedef unsigned char uint8_t;
unit8_t a = 'a';
typedef unsigned int uint16_t;
uint16_t b = 100;
```

变量存储种类
- 自动变量auto
- 外部变量extern 函数体内使用外部的变量
- 静态变量static
- 寄存器register 


### 最小系统
1. 晶振电路
    
2. 复位电路
3. 电源电路

#### 晶振电路示例（11.0592 MHz）

- 参数
  - 晶体：11.0592 MHz
  - 负载电容：C1 = C2 = 22 pF（按 CL≈18 pF，考虑2–5 pF 杂散）
  - 起振电阻：R = 1 MΩ（若 MCU 未内置起振电阻时使用）

- 连接（以 51 的 XTAL1/XTAL2 为例）

```text
       R = 1 MΩ（可选）
XTAL1 ──/\/\/\/──┐
       ┌────────┴────────┐
       │     晶体 XTAL    │
       └────────┬────────┘
XTAL2 ───────────┘
   |                           |
  C1 = 22 pF                C2 = 22 pF
   |                           |
  GND                         GND
```

- 负载电容估算
  - CL ≈ (C1 × C2) / (C1 + C2) + Cstray
  - 使 CL 接近晶体规格书标称负载电容（常见 18 pF）

- 布局要点
  - 晶体和电容尽量靠近 MCU 管脚，走线最短、对称
  - 远离噪声/高频走线，必要时地环护
  - 上电后等待振荡稳定再初始化外设